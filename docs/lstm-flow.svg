<svg xmlns="http://www.w3.org/2000/svg" width="1200" height="680" viewBox="0 0 1200 680" role="img" aria-label="LSTM DLL data flow">
  <defs>
    <style>
      .box { fill: #ffffff; stroke: #334155; stroke-width: 2; rx: 14; }
      .title { font: 700 24px Arial, sans-serif; fill: #0f172a; }
      .txt { font: 18px Arial, sans-serif; fill: #1e293b; }
      .small { font: 16px Arial, sans-serif; fill: #334155; }
      .arrow { stroke: #2563eb; stroke-width: 4; fill: none; marker-end: url(#m); }
    </style>
    <marker id="m" viewBox="0 0 10 10" refX="8" refY="5" markerWidth="8" markerHeight="8" orient="auto-start-reverse">
      <path d="M 0 0 L 10 5 L 0 10 z" fill="#2563eb"/>
    </marker>
  </defs>

  <text x="60" y="60" class="title">MQL5GPULibrary_LSTM – funkční tok LSTM</text>

  <rect class="box" x="60" y="100" width="260" height="110" />
  <text x="85" y="145" class="txt">1) MT5 / indikátor</text>
  <text x="85" y="175" class="small">sekvenční data X, target T</text>

  <rect class="box" x="390" y="100" width="300" height="110" />
  <text x="420" y="145" class="txt">2) DN_LoadBatch</text>
  <text x="420" y="175" class="small">validace dimenzí + GPU buffery</text>

  <rect class="box" x="760" y="100" width="360" height="110" />
  <text x="790" y="145" class="txt">3) LSTM vrstvy + output head</text>
  <text x="790" y="175" class="small">DN_AddLayerEx + DN_SetOutputDim</text>

  <rect class="box" x="390" y="300" width="300" height="110" />
  <text x="420" y="345" class="txt">4) DN_TrainAsync</text>
  <text x="420" y="375" class="small">epochy, MSE, early stop</text>

  <rect class="box" x="760" y="300" width="360" height="110" />
  <text x="790" y="345" class="txt">5) DN_GetTrainingStatus</text>
  <text x="790" y="375" class="small">0 idle / 1 running / 2 done</text>

  <rect class="box" x="390" y="500" width="300" height="110" />
  <text x="420" y="545" class="txt">6) DN_PredictBatch</text>
  <text x="420" y="575" class="small">výstup Y (Expected Move %)</text>

  <line class="arrow" x1="320" y1="155" x2="390" y2="155" />
  <line class="arrow" x1="690" y1="155" x2="760" y2="155" />
  <line class="arrow" x1="940" y1="210" x2="940" y2="300" />
  <line class="arrow" x1="760" y1="355" x2="690" y2="355" />
  <line class="arrow" x1="540" y1="410" x2="540" y2="500" />
</svg>
